<!DOCTYPE html>
<html lang="en" router:current-page="/{{page.fileSlug}}/">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>{{"home" if page.fileSlug == '' else page.fileSlug}}</title>

    <link rel="stylesheet" href="/css/main.css">
    <script src="/js/router.js" type="module"></script>

    {% if env.dev %}
      <link rel="stylesheet" href="/css/pages/home.css">
      <link rel="stylesheet" href="/css/pages/about.css">
    {% else %}
      {# style resources - -  #}
      {% if page.fileSlug == ""%}
        <style router:resource="/">
          {% include "../css/pages/home.css" %}
        </style>
      {% endif %}
      {% if page.fileSlug == 'about' %}
        <style router:resource="/about/">
          {% include "../css/pages/about.css" %}
        </style>
      {% endif %}
    {% endif %}

  </head>
  <body >
    {% include "components/nav.njk" %}
    <svg id="gridlines" width="100%" height="100%" style="position: fixed;width: 100%; height: 100%; top: 0; left: 0; z-index: -1; contain: paint; " viewBox="0 0 256 256" preserveAspectRatio="xMidYMid slice">
      <pattern
    id="pattern-grid"
    viewBox="0 0 16 16"
    width="16"
    height="16"
    patternUnits="userSpaceOnUse"
    patternTransform="rotate(45)"
  >
        <g stroke="hsl(var(--col-primary))" stroke-width="0.45" vector-effect="">
          <line x1="8" x2="8" y1="0" y2="16" />
          <line x1="0" x2="16" y1="8" y2="8" />
        </g>

      </pattern>
      <rect width="100%" height="100%" fill="url(#pattern-grid)" fill-opacity="0.04" />
    </svg>
    <main router:page="{{'/' + page.fileSlug + '/' if page.fileSlug != "" else "/"}}" router:order="{{order}}"  >
      {{ content | safe }}
    </main>

    {% include "components/grain.njk" %}
    {% include "components/nav-logic.njk" %}

    {# script resources - -  #}
    {% if page.fileSlug == 'about' %}
      <script router:resource="/about/" class="test test">
        {% include "../js/pages/about.js" %}
      </script>
    {% endif %}

  </body>
</html>