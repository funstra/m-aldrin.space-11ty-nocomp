<!DOCTYPE html>
<html lang="en" router:current-page="/{{page.fileSlug}}/" router:current-layout="{{layout}}">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>{{"home" if page.fileSlug == '' else page.fileSlug}}</title>

    <meta name="description" content="{{description if description else "Marcus Aldrins personal website"}}">

    <link rel="stylesheet" href="/css/main.css">

    {# <link rel="preload" href="/assets/fonts/vollkorn/vollkorn-v20-latin-regular.woff2" as="font" type="font/woff2"> #}
    <link rel="preload" href="/assets/fonts/scp/source-code-pro-v21-latin-300.woff2" as="font" type="font/woff2">
    <link rel="preload" href="/assets/fonts/scp/source-code-pro-v21-latin-regular.woff2" as="font" type="font/woff2">

    <script src="/js/router.js" type="module"></script>

    {% if env.dev %}
      <link rel="stylesheet" href="/css/pages/home.css">
      <link rel="stylesheet" href="/css/pages/work.css">
      <link rel="stylesheet" href="/css/pages/about.css">
      <link rel="stylesheet" href="/css/layouts/works.css">
      <link rel="stylesheet" href="/css/components/nav.css">
    {% else %}
      {# style resources - -  #}
      <style>
        {% include "../css/components/nav.css" %}
      </style>
      {% if page.fileSlug == ""%}
        <style router:resource="/">
          {% include "../css/pages/home.css" %}
        </style>
      {% endif %}
      {% if page.fileSlug == 'work' %}
        <style router:resource="/work/">
          {% include "../css/pages/work.css" %}
        </style>
      {% endif %}
      {% if layout == 'works.njk' %}
        <style router:resource="works.njk">
          {% include "../css/layouts/works.css" %}
        </style>
      {% endif %}
      {% if page.fileSlug == 'about' %}
        <style router:resource="/about/">
          {% include "../css/pages/about.css" %}
        </style>
      {% endif %}
    {% endif %}

  </head>
  <body >
    {% include "components/nav.njk" %}
    {% include "components/gridlines.njk" %}

    <main tabindex="-1" router:layout="{{layout}}" router:page="{{'/' + page.fileSlug + '/' if page.fileSlug != "" else "/"}}" router:order="{{order}}" router:direction="{{transitionDirection}}" >
      {{ content | safe }}
    </main>

    {% include "components/grain.njk" %}
    {% include "components/nav-logic.njk" %}

    {# script resources - -  #}
    {% if page.fileSlug == 'about' %}
      <script router:resource="/about/" class="test test">
        {% include "../js/pages/about.js" %}
      </script>
    {% endif %}

  </body>
</html>